1:"$Sreact.fragment"
2:I[1483,["177","static/chunks/app/layout-e2df609ea3d3ba96.js"],"ThemeProvider"]
3:I[7555,[],""]
4:I[1295,[],""]
6:I[9665,[],"OutletBoundary"]
8:I[4911,[],"AsyncMetadataOutlet"]
a:I[9665,[],"ViewportBoundary"]
c:I[9665,[],"MetadataBoundary"]
d:"$Sreact.suspense"
f:I[8393,[],""]
:HL["/_next/static/media/569ce4b8f30dc480-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/2ff57a8dc1dd022b.css","style"]
:HL["/_next/static/css/1669b7e3576d3f0b.css","style"]
0:{"P":null,"b":"h_8yXyT-_9MJWq69wBcwX","p":"","c":["","docs","dev","upgrade_dj_stripe",""],"i":false,"f":[[["",{"children":["docs",{"children":[["version","dev","d"],{"children":[["slug","upgrade_dj_stripe","oc"],{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/2ff57a8dc1dd022b.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/1669b7e3576d3f0b.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"children":["$","body",null,{"className":"__variable_5cfdac __variable_9a8899 antialiased","children":["$","$L2",null,{"defaultTheme":"system","storageKey":"dj-stripe-theme","children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]}]]}],{"children":["docs",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["version","dev","d"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","upgrade_dj_stripe","oc"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L5",null,["$","$L6",null,{"children":["$L7",["$","$L8",null,{"promise":"$@9"}]]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,[["$","$La",null,{"children":"$Lb"}],["$","meta",null,{"name":"next-size-adjust","content":""}]],["$","$Lc",null,{"children":["$","div",null,{"hidden":true,"children":["$","$d",null,{"fallback":null,"children":"$Le"}]}]}]]}],false]],"m":"$undefined","G":["$f",[]],"s":false,"S":true}
b:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
7:null
9:{"metadata":[["$","title","0",{"children":"dj-stripe - Stripe Made Easy for Django Developers"}],["$","meta","1",{"name":"description","content":"The easiest way to integrate Stripe with your Django project. Handle payments, subscriptions, and webhooks with just a few lines of code."}]],"error":null,"digest":"$undefined"}
e:"$9:metadata"
10:I[6874,["874","static/chunks/874-437a265a67d6cfee.js","313","static/chunks/313-066de8fe535cc241.js","967","static/chunks/app/docs/%5Bversion%5D/%5B%5B...slug%5D%5D/page-4b0116ae65eeec55.js"],""]
11:I[7283,["874","static/chunks/874-437a265a67d6cfee.js","313","static/chunks/313-066de8fe535cc241.js","967","static/chunks/app/docs/%5Bversion%5D/%5B%5B...slug%5D%5D/page-4b0116ae65eeec55.js"],"GitHubRepoWidget"]
12:I[6690,["874","static/chunks/874-437a265a67d6cfee.js","313","static/chunks/313-066de8fe535cc241.js","967","static/chunks/app/docs/%5Bversion%5D/%5B%5B...slug%5D%5D/page-4b0116ae65eeec55.js"],"VersionSelector"]
13:I[1000,["874","static/chunks/874-437a265a67d6cfee.js","313","static/chunks/313-066de8fe535cc241.js","967","static/chunks/app/docs/%5Bversion%5D/%5B%5B...slug%5D%5D/page-4b0116ae65eeec55.js"],"Search"]
14:I[6688,["874","static/chunks/874-437a265a67d6cfee.js","313","static/chunks/313-066de8fe535cc241.js","967","static/chunks/app/docs/%5Bversion%5D/%5B%5B...slug%5D%5D/page-4b0116ae65eeec55.js"],"ThemeToggle"]
5:["$","div",null,{"className":"min-h-screen bg-white dark:bg-gray-900","children":[["$","header",null,{"className":"border-b border-gray-200 dark:border-gray-800 sticky top-0 bg-white dark:bg-gray-900 z-10","children":["$","nav",null,{"className":"container mx-auto px-6 py-4 flex items-center justify-between","children":[["$","$L10",null,{"href":"/","className":"text-2xl font-bold","children":["dj-",["$","span",null,{"className":"text-stripe-blurple","children":"stripe"}]]}],["$","div",null,{"className":"flex gap-6 items-center","children":[["$","$L10",null,{"href":"/about","className":"hover:text-blue-600 transition-colors","children":"About"}],["$","$L10",null,{"href":"/docs/latest","className":"text-blue-600 font-semibold","children":"Documentation"}],["$","$L10",null,{"href":"/sponsors","className":"hover:text-blue-600 transition-colors","children":"Sponsors"}],["$","$L10",null,{"href":"/team","className":"hover:text-blue-600 transition-colors","children":"Team"}],["$","$L10",null,{"href":"/support","className":"hover:text-blue-600 transition-colors","children":"Support"}],["$","$L11",null,{}],["$","$L12",null,{"currentVersion":"dev","versions":["dev"],"currentPath":"upgrade_dj_stripe"}],["$","$L13",null,{}],["$","$L14",null,{}]]}]]}]}],["$","div",null,{"className":"container mx-auto px-6 py-8","children":["$","div",null,{"className":"flex gap-8","children":[["$","aside",null,{"className":"w-64 flex-shrink-0","children":["$","nav",null,{"className":"sticky top-24","children":[["$","h3",null,{"className":"font-semibold mb-4","children":"Documentation"}],["$","ul",null,{"className":"space-y-2","children":[["$","li","",{"children":[["$","$L10",null,{"href":"/docs/dev","className":"block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors ","children":"Getting Started"}],["$","ul",null,{"className":"ml-4 mt-2 space-y-1","children":[["$","li","/installation",{"children":["$","$L10",null,{"href":"/docs/dev/installation","className":"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400","children":"Installation"}]}],["$","li","/api_keys",{"children":["$","$L10",null,{"href":"/docs/dev/api_keys","className":"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400","children":"API Keys"}]}],["$","li","/api_versions",{"children":["$","$L10",null,{"href":"/docs/dev/api_versions","className":"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400","children":"API Versions"}]}],["$","li","/upgrade_dj_stripe",{"children":["$","$L10",null,{"href":"/docs/dev/upgrade_dj_stripe","className":"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors bg-blue-50 dark:bg-blue-900/20 text-blue-600","children":"Upgrade Guide"}]}]]}]]}],["$","li","/usage",{"children":[["$","$L10",null,{"href":"/docs/dev/usage","className":"block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors ","children":"Usage"}],["$","ul",null,{"className":"ml-4 mt-2 space-y-1","children":[["$","li","/usage/webhooks",{"children":["$","$L10",null,{"href":"/docs/dev/usage/webhooks","className":"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400","children":"Webhooks"}]}],["$","li","/usage/subscribing_customers",{"children":["$","$L10",null,{"href":"/docs/dev/usage/subscribing_customers","className":"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400","children":"Subscribing Customers"}]}],["$","li","/usage/add_payment_method_to_customer",{"children":["$","$L10",null,{"href":"/docs/dev/usage/add_payment_method_to_customer","className":"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400","children":"Payment Methods"}]}],["$","li","/usage/managing_subscriptions",{"children":["$","$L10",null,{"href":"/docs/dev/usage/managing_subscriptions","className":"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400","children":"Managing Subscriptions"}]}],"$L15","$L16"]}]]}]]}]]}]}],"$L17"]}]}]]}]
15:["$","li","/usage/using_stripe_checkout",{"children":["$","$L10",null,{"href":"/docs/dev/usage/using_stripe_checkout","className":"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400","children":"Stripe Checkout"}]}]
16:["$","li","/usage/manually_syncing_with_stripe",{"children":["$","$L10",null,{"href":"/docs/dev/usage/manually_syncing_with_stripe","className":"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400","children":"Manual Syncing"}]}]
17:["$","main",null,{"className":"flex-1 max-w-4xl","children":["$","article",null,{"className":"prose prose-lg dark:prose-invert max-w-none","children":"$L18"}]}]
18:[["$","h1",null,{"children":"Upgrading dj-stripe Smooth and Carefully"}],"\n",["$","h2",null,{"children":"Background"}],"\n",["$","p",null,{"children":["In this article, we will share how to upgrade the ",["$","code",null,{"children":"dj-stripe"}]," package flawlessly and carefully."]}],"\n",["$","p",null,{"children":["!!! attention \"Important Note\"\nPlease keep in mind that ",["$","code",null,{"children":"dj-stripe"}]," always squashes the migration files.\nWhich means its migration files are completely changed, and leading to migration issues.\n",["$","strong",null,{"children":["So, you can't immediately upgrade your package too far, for example, from ",["$","code",null,{"children":"2.4.0"}]," to ",["$","code",null,{"children":"2.7.0"}]," because it will cause breaking changes, especially in your database migrations."]}]]}],"\n",["$","h2",null,{"children":"How to do it?"}],"\n",["$","p",null,{"children":["For example, if your ",["$","code",null,{"children":"dj-stripe"}]," version is ",["$","code",null,{"children":"2.4.0"}]," and your migration files are referring to the old version."]}],"\n",["$","p",null,{"children":["$","img",null,{"src":"https://github.com/agusmakmun/agusmakmun.github.io/assets/7134451/d433d048-d3cf-4385-a7f6-f1890acfe206","alt":"old migration file"}]}],"\n",["$","p",null,{"children":"First, you need to find which version has that old migration. For example:"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["Search for the latest version that is closest to your package version, for example: ",["$","code",null,{"children":"2.4.0"}]," to ",["$","code",null,{"children":"2.5.0"}],"."]}],"\n",["$","li",null,{"children":["Visit this link to find it: ",["$","a",null,{"href":"https://github.com/dj-stripe/dj-stripe/releases","children":"https://github.com/dj-stripe/dj-stripe/releases"}]]}],"\n",["$","li",null,{"children":"Cross-check the release notes."}],"\n",["$","li",null,{"children":["Find which dj-stripe version is still compatible with your migration file, for example: ",["$","code",null,{"children":"0006_2_3.py"}],"."]}],"\n",["$","li",null,{"children":["Find the last migration file of the latest version at ",["$","a",null,{"href":"https://github.com/dj-stripe/dj-stripe/tree/2.5.0/djstripe/migrations","children":"https://github.com/dj-stripe/dj-stripe/tree/2.5.0/djstripe/migrations"}]," (for example: ",["$","code",null,{"children":"0008_2_5.py"}],") (both files must exist; if not, it means the new version is no longer compatible with your version)."]}],"\n"]}],"\n",["$","table",null,{"children":[["$","thead",null,{"children":["$","tr",null,{"children":[["$","th",null,{"children":"Old Migration"}],["$","th",null,{"children":"New Migration"}]]}]}],["$","tbody",null,{"children":["$","tr",null,{"children":[["$","td",null,{"children":["$","img",null,{"src":"https://github.com/agusmakmun/agusmakmun.github.io/assets/7134451/6958e5a5-2e6d-4dd7-a9e3-5f067a819378","alt":"old migration"}]}],["$","td",null,{"children":["$","img",null,{"src":"https://github.com/agusmakmun/agusmakmun.github.io/assets/7134451/4b075b78-5a34-4ed5-a23a-7dd1c8884bfa","alt":"new migration"}]}]]}]}]]}],"\n",["$","ol",null,{"start":"6","children":["\n",["$","li",null,{"children":["Update your ",["$","code",null,{"children":"requirements.txt"}]," file from ",["$","code",null,{"children":"dj-stripe==2.4.0"}]," to ",["$","code",null,{"children":"dj-stripe==2.5.0"}]]}],"\n",["$","li",null,{"children":["Run the ",["$","code",null,{"children":"manage.py migrate djstripe"}]," command ",["$","em",null,{"children":"(this command must not fail; if it does, cross-check steps 1-6)."}]]}],"\n"]}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"hljs language-bash","children":"(env-my-project) ➜  my-project git:(development) ✗ docker-compose -f local.yml run django python manage.py migrate djstripe\n[+] Creating 3/0\n ✔ Container my-project-redis-1     Running                                                                                                                                                                                  0.0s\n ✔ Container my-project-mailhog-1   Running                                                                                                                                                                                  0.0s\n ✔ Container my-project-postgres-1  Running                                                                                                                                                                                  0.0s\nPostgreSQL is available\nSystem check identified some issues:\n\nOperations to perform:\n  Apply all migrations: djstripe\nRunning migrations:\n  Applying djstripe.0008_2_5... OK\n"}]}],"\n","$L19","\n","$L1a","\n","$L1b","\n","$L1c","\n","$L1d","\n","$L1e","\n","$L1f","\n","$L20","\n","$L21"]
19:["$","ol",null,{"start":"8","children":["\n",["$","li",null,{"children":["And then, after migrating it, change your migration file to refer to the new version (e.g., from ",["$","code",null,{"children":"0006_2_3"}]," to ",["$","code",null,{"children":"0008_2_5"}],")."]}],"\n"]}]
1a:["$","p",null,{"children":["$","img",null,{"src":"https://github.com/agusmakmun/agusmakmun.github.io/assets/7134451/70ebe2d4-d780-4994-b05b-e361fc95dd3d","alt":"change migration file"}]}]
1b:["$","ol",null,{"start":"9","children":["\n",["$","li",null,{"children":"Repeat the same process for higher version."}],"\n"]}]
1c:["$","p",null,{"children":["If you have an issue with the Stripe version, we can also try upgrading it in the ",["$","code",null,{"children":"requirements.txt"}]," file.\nCheck out this issue for more information: ",["$","a",null,{"href":"https://github.com/dj-stripe/dj-stripe/issues/1842#issuecomment-1319185657","children":"https://github.com/dj-stripe/dj-stripe/issues/1842#issuecomment-1319185657"}],"."]}]
1d:["$","pre",null,{"children":["$","code",null,{"className":"hljs language-txt","children":"stripe>=4.0.0,<5.0.0  # https://github.com/dj-stripe/dj-stripe/issues/1842#issuecomment-1319185657\n"}]}]
1e:["$","h2",null,{"children":"Conclusion"}]
1f:["$","ol",null,{"children":["\n",["$","li",null,{"children":["Find the closest version that compatible with your version ",["$","em",null,{"children":"(for doing migration)"}],"."]}],"\n",["$","li",null,{"children":["Update the dependency in ",["$","code",null,{"children":"requirements.txt"}]," file and then deploy it.","\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["Don't forget to run the ",["$","code",null,{"children":"python manage.py migrate djstripe"}]," command."]}],"\n"]}],"\n"]}],"\n",["$","li",null,{"children":["Change your migration file to refer to the new version (e.g., from ",["$","code",null,{"children":"0006_2_3"}]," to ",["$","code",null,{"children":"0008_2_5"}],"), and then deploy it."]}],"\n"]}]
20:["$","h2",null,{"children":"Alternatives"}]
21:["$","ul",null,{"children":["\n",["$","li",null,{"children":["$","a",null,{"href":"https://stackoverflow.com/a/31122841","children":"https://stackoverflow.com/a/31122841"}]}],"\n"]}]
