<!DOCTYPE html><!--XDaiPjrDHgA4q5tAtFB8o--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/569ce4b8f30dc480-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/2ff57a8dc1dd022b.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/08ea9ccded85ea26.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-08309892bbe354a2.js"/><script src="/_next/static/chunks/4bd1b696-cf72ae8a39fa05aa.js" async=""></script><script src="/_next/static/chunks/964-69097a61540f27b4.js" async=""></script><script src="/_next/static/chunks/main-app-b0c2b1956eab1d69.js" async=""></script><script src="/_next/static/chunks/app/layout-e2df609ea3d3ba96.js" async=""></script><script src="/_next/static/chunks/244-75f77586f1edfee3.js" async=""></script><script src="/_next/static/chunks/105-6376b4bf520053bc.js" async=""></script><script src="/_next/static/chunks/app/docs/%5Bversion%5D/%5B%5B...slug%5D%5D/page-3887ad97704d0fd7.js" async=""></script><meta name="next-size-adjust" content=""/><title>dj-stripe - Stripe Made Easy for Django Developers</title><meta name="description" content="The easiest way to integrate Stripe with your Django project. Handle payments, subscriptions, and webhooks with just a few lines of code."/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__variable_5cfdac __variable_9a8899 antialiased"><div hidden=""><!--$--><!--/$--></div><div class="min-h-screen bg-white dark:bg-gray-900"><header class="border-b border-gray-200 dark:border-gray-800 sticky top-0 bg-white dark:bg-gray-900 z-10"><nav class="container mx-auto px-4 sm:px-6 py-4"><div class="flex items-center justify-between"><a class="text-2xl font-bold z-50" href="/">dj-<span class="text-stripe-blurple">stripe</span></a><div class="hidden lg:flex gap-6 items-center"><a class="hover:text-blue-600 transition-colors" href="/about/">About</a><a class="text-blue-600 font-semibold" href="/docs/latest/">Documentation</a><a class="hover:text-blue-600 transition-colors" href="/sponsors/">Sponsors</a><a class="hover:text-blue-600 transition-colors" href="/team/">Team</a><a class="hover:text-blue-600 transition-colors" href="/support/">Support</a><a href="https://github.com/dj-stripe/dj-stripe" class="flex items-center gap-2 sm:gap-3 px-2 sm:px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-700 dark:text-gray-300" target="_blank" rel="noopener noreferrer"><i class="fab fa-github text-lg sm:text-xl"></i><div class="hidden sm:flex flex-col"><span class="text-sm font-medium">dj-stripe</span><div class="flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400"><span>Loading...</span></div></div></a><select class="px-3 py-1 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800"><option value="dev" selected="">vdev</option></select><div class="relative"><button class="flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg><span>Search</span><kbd class="hidden sm:inline-block px-1.5 py-0.5 text-xs bg-gray-200 dark:bg-gray-700 rounded">⌘K</kbd></button></div><button class="group relative p-2.5 rounded-full hover:bg-gray-100/80 dark:hover:bg-gray-800/80 transition-all duration-200 hover:scale-105 active:scale-95" aria-label="Switch to dark mode"><div class="absolute inset-0 rounded-full bg-gradient-to-br from-yellow-200/20 to-orange-300/20 dark:from-purple-400/20 dark:to-blue-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div><div class="relative transition-all duration-300 "><div class="relative w-5 h-5"><svg class="w-full h-full text-amber-500 transition-all duration-300 drop-shadow-sm" fill="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" class="animate-pulse"></circle><g class="animate-spin" style="transform-origin:12px 12px;animation-duration:8s"><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></g></svg></div></div><div class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 px-2 py-1 text-xs text-white bg-gray-900 dark:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap">Switch to <!-- -->dark<!-- --> mode</div></button></div><button class="lg:hidden p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors z-50" aria-label="Toggle mobile menu"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div></nav></header><div class="container mx-auto px-6 py-8"><div class="flex gap-8"><aside class="w-64 flex-shrink-0"><nav class="sticky top-24"><h3 class="font-semibold mb-4">Documentation</h3><ul class="space-y-2"><li><a class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors " href="/docs/dev/">Getting Started</a><ul class="ml-4 mt-2 space-y-1"><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/installation/">Installation</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/api_keys/">API Keys</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/api_versions/">API Versions</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/upgrade_dj_stripe/">Upgrade Guide</a></li></ul></li><li><a class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors " href="/docs/dev/usage/">Usage</a><ul class="ml-4 mt-2 space-y-1"><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/usage/webhooks/">Webhooks</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/usage/subscribing_customers/">Subscribing Customers</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/usage/add_payment_method_to_customer/">Payment Methods</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/usage/managing_subscriptions/">Managing Subscriptions</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/usage/using_stripe_checkout/">Stripe Checkout</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/usage/manually_syncing_with_stripe/">Manual Syncing</a></li></ul></li><li><a class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors " href="/docs/dev/changes/">Changelog</a><ul class="ml-4 mt-2 space-y-1"><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/changes/2_10_0/">Version 2.10</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/changes/2_9_0/">Version 2.9</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/changes/2_8_0/">Version 2.8</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/changes/2_7_0/">Version 2.7</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/changes/2_6_0/">Version 2.6</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/changes/2_5_0/">Version 2.5</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors bg-blue-50 dark:bg-blue-900/20 text-blue-600" href="/docs/dev/changes/2_4_0/">Version 2.4</a></li><li><a class="block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400" href="/docs/dev/changes/2_x/">Older Versions</a></li></ul></li></ul></nav></aside><main class="flex-1 max-w-4xl"><article class="prose prose-lg max-w-none"><h1>dj-stripe 2.4.0 release notes (2020-11-19)</h1>
<p><em>NOTE</em>: To upgrade to 2.4.0 from older versions of dj-stripe, scroll down to the <a href="#upgrade-guide">Upgrade Guide</a>.</p>
<h2>Introducing sponsorships and our first sponsor</h2>
<p>We&#x27;re excited to introduce our <a href="https://github.com/sponsors/dj-stripe">Sponsorship
tiers</a>. Individuals may back dj-stripe to assist
with development. Larger backers may choose one the <a href="../project/support.md#support_plans">paid support plans
available</a> to receive support on top of ensuring the long-term
viability of the project!</p>
<p>And this release was made possible by none other than… <a href="https://stripe.com">Stripe</a>! Our
very first Gold sponsor. Their financial backing has allowed us to pour a lot of work
that could not have otherwise happened.</p>
<h2>Release notes</h2>
<ul>
<li>Support for Django 3.1 and Python 3.8.</li>
<li>Minimum stripe-python version is now 2.48.0.</li>
<li>Default Stripe API version is now <code>2020-08-27</code>.</li>
<li>First-class support for the Price model, replacing Plans.</li>
<li>Support multi-item subscriptions.</li>
<li>Support for API keys in the database (see <a href="../api_keys.md#managing_stripe_api_keys">Managing Stripe API
keys</a>).</li>
<li>Support for syncing objects for multiple, different Stripe accounts.</li>
<li>Use Django 3.1 native JSONField when available.</li>
<li>The field <code>djstripe_owner_account</code> has been added to all Stripe models, and is
automatically populated with the Account that owns the API key used to retrieve it.</li>
<li>Support for subscription schedules (#899).</li>
<li>Add support for Reporting categories and TaxIds</li>
<li>Update many models to match latest version of the Stripe API.</li>
<li>Fixed Account.get_default_account() for Restricted API Keys.</li>
<li>Allow passing arbitrary arguments (any valid SDK argument) to the following methods:<!-- -->
<ul>
<li><code>Customer.charge()</code></li>
<li><code>Customer.subscribe()</code>,</li>
<li><code>Charge.capture()</code></li>
<li><code>Subscription.update()</code></li>
</ul>
</li>
<li>New management command: <code>djstripe_update_invoiceitem_ids</code>. This command migrates
InvoiceItems using Stripe&#x27;s old IDs to the new ones.</li>
<li>Hundreds of other bugfixes.</li>
</ul>
<h2>New feature: in-database Stripe API keys</h2>
<p>Stripe API keys are now stored in the database, and are now editable in the admin.</p>
<p><em>WARNING</em>: By default, all keys are visible by anyone who has access to the dj-stripe
administration.</p>
<h3>Why?</h3>
<p>As we work on supporting multiple Stripe accounts per instance, it is vital for
dj-stripe to have a mechanism to store more than one Stripe API key. It also became
obvious that we may want proper programmatic access to create and delete keys.
Furthermore, API keys are a legitimate upstream Stripe object, and it is not unlikely
the API may allow access to listing other API keys in the future, in which case we will
want to move them to the database anyway.</p>
<p>In the next release, we are planning to make WebhookEndpoints (and thus webhook secrets)
manageable via the database as well.</p>
<h3>Do I need to change anything?</h3>
<p>Not at this time. The settings <code>STRIPE_LIVE_SECRET_KEY</code> and <code>STRIPE_TEST_SECRET_KEY</code> can
still be used. Their values will however be automatically saved to the database at the
earliest opportunity.</p>
<h3>What about public keys?</h3>
<p>Setting <code>STRIPE_LIVE_PUBLIC_KEY</code> and <code>STRIPE_TEST_PUBLIC_KEY</code> will be deprecated next
release. You do not risk anything by leaving them in your settings: They are not used by
Dj-Stripe outside of the Dj-Stripe mixins, which are now themselves deprecated. So you
can safely leave them in your settings, or you can move them to the database as well
(Keys beginning in <code>pk_test_</code> and <code>pk_live_</code> will be detected as publishable keys).</p>
<h2>Deprecated features</h2>
<p>Nobody likes features being removed. However, the last few releases we have had to
remove features that were not core to what dj-stripe does, or simply poorly-maintained.
To keep up with the trend, we are making three major deprecations this release:</p>
<h3>Creating Plans from the Django Admin is no longer supported</h3>
<p>The <code>Plan</code> model was special cased in various places, including being the only one which
supported being created from the Django administration. This is no longer supported. We
have plans to allow creating arbitrary Stripe objects from the Django Admin, but until
it can be done consistently, we have decided to remove the feature for Plans (which are
deprecated by Stripe anyway). The only object type you should be dealing with from the
admin is the new APIKey model.</p>
<p>Along with this, we are also deprecating the <code>djstripe_sync_plans_from_stripe</code>
management command. You can instead use the <code>djstripe_sync_models</code> management command,
which supports arbitrary models.</p>
<h3>Deprecating the REST API</h3>
<p>We are dropping all support for the REST API and will be fully removing it in 2.5.0.
We&#x27;re doing this because we wish to keep such an API separate from dj-stripe. Work has
already started on a new project, and we will be sharing more details about it soon. If
you&#x27;re interested in helping out, please reach out on
<a href="https://github.com/dj-stripe/dj-stripe/issues/new">Github</a>!</p>
<h3>Deprecating <code>djstripe.middleware.SubscriptionPaymentMiddleware</code></h3>
<p>Large parts of dj-stripe, including this middleware, were designed before Stripe&#x27;s major
revamps of the old Plan model into Prices, Products, and multi-plan subscriptions. The
functionality offered by the middleware is no longer adequate, and building on top of it
would not be particularly robust. We may bring similar functionality back in the future,
but the middleware as it is going away (as well as the undocumented
<code>djstripe.utils.subscriber_has_active_subscription</code> utility function).</p>
<p>If you want to keep the functionality for your project, you may wish to <a href="https://github.com/dj-stripe/dj-stripe/blob/2.4.0/djstripe/middleware.py">copy the latest
version of the
middleware</a>.</p>
<h3>Deprecating <code>djstripe.mixins</code></h3>
<p>This is being deprecated for similar reasons as the SubscriptionPaymentMiddleware.
However, the mixins module was undocumented and never officially supported.</p>
<h3>Other deprecations</h3>
<ul>
<li>The <code>account</code> field on <code>Charge</code> has been renamed to <code>on_behalf_of</code>, to be consistent
with Stripe&#x27;s upstream model. Note that this field is separate from
<code>djstripe_owner_account</code>, which is set by dj-stripe itself to match the account of
the API key used.</li>
<li><code>Account.get_connected_account_from_token()</code> is deprecated in favour of
<code>Account.get_or_retrieve_for_api_key()</code>, which supports more than just Connect
accounts.</li>
<li><code>Customer.has_active_subscription()</code> is deprecated in favour of
<code>Customer.is_subscribed_to()</code>. Note that the former takes a plan as argument,
whereas the latter takes a product as argument.</li>
<li>The <code>tax_percent</code> attribute of <code>Invoice</code> is no longer populated and will be removed
in 2.5.0. You may want to use <code>Invoice.default_tax_rates</code> instead, which uses the
new TaxId functionality.</li>
<li><code>Customer.business_vat_id</code> is being deprecated in favour of using TaxId models
directly.</li>
</ul>
<h2>Breaking changes</h2>
<ul>
<li>
<p>Rename PlanBillingScheme to BillingScheme.</p>
</li>
<li>
<p>Remove <code>Plan.update_name()</code> and these previously-deprecated fields:</p>
<ul>
<li><code>Customer.business_vat_id</code></li>
<li><code>Subscription.start</code></li>
<li><code>Subscription.billing</code></li>
</ul>
</li>
</ul>
<h2>Upgrade Guide</h2>
<p>Before you upgrade to dj-stripe 2.4.0, we recommend upgrading to dj-stripe 2.3.0.
Upgrading one major release at a time minimizes the risk of issues arising.</p>
<p>Upgrading directly to 2.4.0 from dj-stripe versions older than 2.2.0 is unsupported.</p>
<p>To upgrade dj-stripe, run <code>pip install --upgrade dj-stripe==2.4.0</code>.</p>
<p>Once installed, you can run <code>manage.py migrate djstripe</code> to migrate the database models.</p>
<p><em>NOTE</em>: If you are doing multiple major dj-stripe upgrades in a row, remember to run the
migrate command after every upgrade. Skipping this step WILL cause errors.</p>
<p><em>NOTE</em>: Migrating the database models may take a long time on databases with large amounts of customers.</p>
<h3>Settings changes</h3>
<p>A new mandatory setting <code>DJSTRIPE_FOREIGN_KEY_TO_FIELD</code> has been added. If you are
upgrading from an older version, you need to set it to <code>&quot;djstripe_id&quot;</code>.</p>
<p>Setting it to <code>&quot;id&quot;</code> will make dj-stripe use the Stripe IDs as foreign keys. Although
this is recommended for new installations, there is currently no migration available for
going from <code>&quot;djstripe_id&quot;</code> to <code>&quot;id&quot;</code>.</p>
<p>For more information on this setting, see
<a href="../reference/settings.md#djstripe_foreign_key_to_field">Settings</a>.</p></article></main></div></div></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-08309892bbe354a2.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[1483,[\"177\",\"static/chunks/app/layout-e2df609ea3d3ba96.js\"],\"ThemeProvider\"]\n3:I[7555,[],\"\"]\n4:I[1295,[],\"\"]\n6:I[9665,[],\"OutletBoundary\"]\n8:I[4911,[],\"AsyncMetadataOutlet\"]\na:I[9665,[],\"ViewportBoundary\"]\nc:I[9665,[],\"MetadataBoundary\"]\nd:\"$Sreact.suspense\"\nf:I[8393,[],\"\"]\n:HL[\"/_next/static/media/569ce4b8f30dc480-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/2ff57a8dc1dd022b.css\",\"style\"]\n:HL[\"/_next/static/css/08ea9ccded85ea26.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"XDaiPjrDHgA4q5tAtFB8o\",\"p\":\"\",\"c\":[\"\",\"docs\",\"dev\",\"changes\",\"2_4_0\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"version\",\"dev\",\"d\"],{\"children\":[[\"slug\",\"changes/2_4_0\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/2ff57a8dc1dd022b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/08ea9ccded85ea26.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__variable_5cfdac __variable_9a8899 antialiased\",\"children\":[\"$\",\"$L2\",null,{\"defaultTheme\":\"system\",\"storageKey\":\"dj-stripe-theme\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]]}],{\"children\":[\"docs\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"version\",\"dev\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"changes/2_4_0\",\"oc\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$L7\",[\"$\",\"$L8\",null,{\"promise\":\"$@9\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$d\",null,{\"fallback\":null,\"children\":\"$Le\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$f\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n7:null\n"])</script><script>self.__next_f.push([1,"9:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"dj-stripe - Stripe Made Easy for Django Developers\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"The easiest way to integrate Stripe with your Django project. Handle payments, subscriptions, and webhooks with just a few lines of code.\"}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"e:\"$9:metadata\"\n"])</script><script>self.__next_f.push([1,"10:I[6105,[\"244\",\"static/chunks/244-75f77586f1edfee3.js\",\"105\",\"static/chunks/105-6376b4bf520053bc.js\",\"967\",\"static/chunks/app/docs/%5Bversion%5D/%5B%5B...slug%5D%5D/page-3887ad97704d0fd7.js\"],\"Navigation\"]\n11:I[6690,[\"244\",\"static/chunks/244-75f77586f1edfee3.js\",\"105\",\"static/chunks/105-6376b4bf520053bc.js\",\"967\",\"static/chunks/app/docs/%5Bversion%5D/%5B%5B...slug%5D%5D/page-3887ad97704d0fd7.js\"],\"VersionSelector\"]\n12:I[6874,[\"244\",\"static/chunks/244-75f77586f1edfee3.js\",\"105\",\"static/chunks/105-6376b4bf520053bc.js\",\"967\",\"static/chunks/app/docs/%5Bversion%5D/%5B%5B...slug%5D%5D/page-3887ad97704d0fd7.js\"],\"\"]\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"div\",null,{\"className\":\"min-h-screen bg-white dark:bg-gray-900\",\"children\":[[\"$\",\"$L10\",null,{\"className\":\"sticky top-0 bg-white dark:bg-gray-900 z-10\",\"children\":[\"$\",\"$L11\",null,{\"currentVersion\":\"dev\",\"versions\":[\"dev\"],\"currentPath\":\"changes/2_4_0\"}]}],[\"$\",\"div\",null,{\"className\":\"container mx-auto px-6 py-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex gap-8\",\"children\":[[\"$\",\"aside\",null,{\"className\":\"w-64 flex-shrink-0\",\"children\":[\"$\",\"nav\",null,{\"className\":\"sticky top-24\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"font-semibold mb-4\",\"children\":\"Documentation\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-2\",\"children\":[[\"$\",\"li\",\"\",{\"children\":[[\"$\",\"$L12\",null,{\"href\":\"/docs/dev\",\"className\":\"block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors \",\"children\":\"Getting Started\"}],[\"$\",\"ul\",null,{\"className\":\"ml-4 mt-2 space-y-1\",\"children\":[[\"$\",\"li\",\"/installation\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/installation\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Installation\"}]}],[\"$\",\"li\",\"/api_keys\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/api_keys\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"API Keys\"}]}],[\"$\",\"li\",\"/api_versions\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/api_versions\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"API Versions\"}]}],[\"$\",\"li\",\"/upgrade_dj_stripe\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/upgrade_dj_stripe\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Upgrade Guide\"}]}]]}]]}],[\"$\",\"li\",\"/usage\",{\"children\":[[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/usage\",\"className\":\"block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors \",\"children\":\"Usage\"}],[\"$\",\"ul\",null,{\"className\":\"ml-4 mt-2 space-y-1\",\"children\":[[\"$\",\"li\",\"/usage/webhooks\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/usage/webhooks\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Webhooks\"}]}],[\"$\",\"li\",\"/usage/subscribing_customers\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/usage/subscribing_customers\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Subscribing Customers\"}]}],[\"$\",\"li\",\"/usage/add_payment_method_to_customer\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/usage/add_payment_method_to_customer\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Payment Methods\"}]}],[\"$\",\"li\",\"/usage/managing_subscriptions\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/usage/managing_subscriptions\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Managing Subscriptions\"}]}],[\"$\",\"li\",\"/usage/using_stripe_checkout\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/usage/using_stripe_checkout\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Stripe Checkout\"}]}],[\"$\",\"li\",\"/usage/manually_syncing_with_stripe\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/usage/manually_syncing_with_stripe\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Manual Syncing\"}]}]]}]]}],[\"$\",\"li\",\"/changes\",{\"children\":[[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/changes\",\"className\":\"block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors \",\"children\":\"Changelog\"}],\"$L13\"]}]]}]]}]}],\"$L14\"]}]}]]}]\n"])</script><script>self.__next_f.push([1,"13:[\"$\",\"ul\",null,{\"className\":\"ml-4 mt-2 space-y-1\",\"children\":[[\"$\",\"li\",\"/changes/2_10_0\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/changes/2_10_0\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Version 2.10\"}]}],[\"$\",\"li\",\"/changes/2_9_0\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/changes/2_9_0\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Version 2.9\"}]}],[\"$\",\"li\",\"/changes/2_8_0\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/changes/2_8_0\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Version 2.8\"}]}],[\"$\",\"li\",\"/changes/2_7_0\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/changes/2_7_0\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Version 2.7\"}]}],[\"$\",\"li\",\"/changes/2_6_0\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/changes/2_6_0\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Version 2.6\"}]}],[\"$\",\"li\",\"/changes/2_5_0\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/changes/2_5_0\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Version 2.5\"}]}],[\"$\",\"li\",\"/changes/2_4_0\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/changes/2_4_0\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors bg-blue-50 dark:bg-blue-900/20 text-blue-600\",\"children\":\"Version 2.4\"}]}],[\"$\",\"li\",\"/changes/2_x\",{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/dev/changes/2_x\",\"className\":\"block px-3 py-1 text-sm rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-400\",\"children\":\"Older Versions\"}]}]]}]\n"])</script><script>self.__next_f.push([1,"14:[\"$\",\"main\",null,{\"className\":\"flex-1 max-w-4xl\",\"children\":[\"$\",\"article\",null,{\"className\":\"prose prose-lg max-w-none\",\"children\":\"$L15\"}]}]\n"])</script><script>self.__next_f.push([1,"15:[[\"$\",\"h1\",null,{\"children\":\"dj-stripe 2.4.0 release notes (2020-11-19)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"em\",null,{\"children\":\"NOTE\"}],\": To upgrade to 2.4.0 from older versions of dj-stripe, scroll down to the \",[\"$\",\"a\",null,{\"href\":\"#upgrade-guide\",\"children\":\"Upgrade Guide\"}],\".\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introducing sponsorships and our first sponsor\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"We're excited to introduce our \",[\"$\",\"a\",null,{\"href\":\"https://github.com/sponsors/dj-stripe\",\"children\":\"Sponsorship\\ntiers\"}],\". Individuals may back dj-stripe to assist\\nwith development. Larger backers may choose one the \",[\"$\",\"a\",null,{\"href\":\"../project/support.md#support_plans\",\"children\":\"paid support plans\\navailable\"}],\" to receive support on top of ensuring the long-term\\nviability of the project!\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"And this release was made possible by none other than… \",[\"$\",\"a\",null,{\"href\":\"https://stripe.com\",\"children\":\"Stripe\"}],\"! Our\\nvery first Gold sponsor. Their financial backing has allowed us to pour a lot of work\\nthat could not have otherwise happened.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Release notes\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Support for Django 3.1 and Python 3.8.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Minimum stripe-python version is now 2.48.0.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Default Stripe API version is now \",[\"$\",\"code\",null,{\"children\":\"2020-08-27\"}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"First-class support for the Price model, replacing Plans.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Support multi-item subscriptions.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Support for API keys in the database (see \",[\"$\",\"a\",null,{\"href\":\"../api_keys.md#managing_stripe_api_keys\",\"children\":\"Managing Stripe API\\nkeys\"}],\").\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Support for syncing objects for multiple, different Stripe accounts.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Use Django 3.1 native JSONField when available.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"The field \",[\"$\",\"code\",null,{\"children\":\"djstripe_owner_account\"}],\" has been added to all Stripe models, and is\\nautomatically populated with the Account that owns the API key used to retrieve it.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Support for subscription schedules (#899).\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Add support for Reporting categories and TaxIds\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Update many models to match latest version of the Stripe API.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Fixed Account.get_default_account() for Restricted API Keys.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Allow passing arbitrary arguments (any valid SDK argument) to the following methods:\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Customer.charge()\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Customer.subscribe()\"}],\",\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Charge.capture()\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Subscription.update()\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"New management command: \",[\"$\",\"code\",null,{\"children\":\"djstripe_update_invoiceitem_ids\"}],\". This command migrates\\nInvoiceItems using Stripe's old IDs to the new ones.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Hundreds of other bugfixes.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"New feature: in-database Stripe API keys\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Stripe API keys are now stored in the database, and are now editable in the admin.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"em\",null,{\"children\":\"WARNING\"}],\": By default, all keys are visible by anyone who has access to the dj-stripe\\nadministration.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Why?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"As we work on supporting multiple Stripe accounts per instance, it is vital for\\ndj-stripe to have a mechanism to store more than one Stripe API key. It also became\\nobvious that we may want proper programmatic access to create and delete keys.\\nFurthermore, API keys are a legitimate upstream Stripe object, and it is not unlikely\\nthe API may allow access to listing other API keys in the future, in which case we will\\nwant to move them to the database anyway.\"}],\"\\n\",\"$L16\",\"\\n\",\"$L17\",\"\\n\",\"$L18\",\"\\n\",\"$L19\",\"\\n\",\"$L1a\",\"\\n\",\"$L1b\",\"\\n\",\"$L1c\",\"\\n\",\"$L1d\",\"\\n\",\"$L1e\",\"\\n\",\"$L1f\",\"\\n\",\"$L20\",\"\\n\",\"$L21\",\"\\n\",\"$L22\",\"\\n\",\"$L23\",\"\\n\",\"$L24\",\"\\n\",\"$L25\",\"\\n\",\"$L26\",\"\\n\",\"$L27\",\"\\n\",\"$L28\",\"\\n\",\"$L29\",\"\\n\",\"$L2a\",\"\\n\",\"$L2b\",\"\\n\",\"$L2c\",\"\\n\",\"$L2d\",\"\\n\",\"$L2e\",\"\\n\",\"$L2f\",\"\\n\",\"$L30\",\"\\n\",\"$L31\",\"\\n\",\"$L32\",\"\\n\",\"$L33\",\"\\n\",\"$L34\",\"\\n\",\"$L35\"]\n"])</script><script>self.__next_f.push([1,"16:[\"$\",\"p\",null,{\"children\":\"In the next release, we are planning to make WebhookEndpoints (and thus webhook secrets)\\nmanageable via the database as well.\"}]\n17:[\"$\",\"h3\",null,{\"children\":\"Do I need to change anything?\"}]\n18:[\"$\",\"p\",null,{\"children\":[\"Not at this time. The settings \",[\"$\",\"code\",null,{\"children\":\"STRIPE_LIVE_SECRET_KEY\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"STRIPE_TEST_SECRET_KEY\"}],\" can\\nstill be used. Their values will however be automatically saved to the database at the\\nearliest opportunity.\"]}]\n19:[\"$\",\"h3\",null,{\"children\":\"What about public keys?\"}]\n1a:[\"$\",\"p\",null,{\"children\":[\"Setting \",[\"$\",\"code\",null,{\"children\":\"STRIPE_LIVE_PUBLIC_KEY\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"STRIPE_TEST_PUBLIC_KEY\"}],\" will be deprecated next\\nrelease. You do not risk anything by leaving them in your settings: They are not used by\\nDj-Stripe outside of the Dj-Stripe mixins, which are now themselves deprecated. So you\\ncan safely leave them in your settings, or you can move them to the database as well\\n(Keys beginning in \",[\"$\",\"code\",null,{\"children\":\"pk_test_\"}],\" and \",[\"$\",\"code\",null,{\"children\":\"pk_live_\"}],\" will be detected as publishable keys).\"]}]\n1b:[\"$\",\"h2\",null,{\"children\":\"Deprecated features\"}]\n1c:[\"$\",\"p\",null,{\"children\":\"Nobody likes features being removed. However, the last few releases we have had to\\nremove features that were not core to what dj-stripe does, or simply poorly-maintained.\\nTo keep up with the trend, we are making three major deprecations this release:\"}]\n1d:[\"$\",\"h3\",null,{\"children\":\"Creating Plans from the Django Admin is no longer supported\"}]\n1e:[\"$\",\"p\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"Plan\"}],\" model was special cased in various places, including being the only one which\\nsupported being created from the Django administration. This is no longer supported. We\\nhave plans to allow creating arbitrary Stripe objects from the Django Admin, but until\\nit can be done consistently, we have decided to remove the feature for Plans (which "])</script><script>self.__next_f.push([1,"are\\ndeprecated by Stripe anyway). The only object type you should be dealing with from the\\nadmin is the new APIKey model.\"]}]\n1f:[\"$\",\"p\",null,{\"children\":[\"Along with this, we are also deprecating the \",[\"$\",\"code\",null,{\"children\":\"djstripe_sync_plans_from_stripe\"}],\"\\nmanagement command. You can instead use the \",[\"$\",\"code\",null,{\"children\":\"djstripe_sync_models\"}],\" management command,\\nwhich supports arbitrary models.\"]}]\n20:[\"$\",\"h3\",null,{\"children\":\"Deprecating the REST API\"}]\n21:[\"$\",\"p\",null,{\"children\":[\"We are dropping all support for the REST API and will be fully removing it in 2.5.0.\\nWe're doing this because we wish to keep such an API separate from dj-stripe. Work has\\nalready started on a new project, and we will be sharing more details about it soon. If\\nyou're interested in helping out, please reach out on\\n\",[\"$\",\"a\",null,{\"href\":\"https://github.com/dj-stripe/dj-stripe/issues/new\",\"children\":\"Github\"}],\"!\"]}]\n22:[\"$\",\"h3\",null,{\"children\":[\"Deprecating \",[\"$\",\"code\",null,{\"children\":\"djstripe.middleware.SubscriptionPaymentMiddleware\"}]]}]\n23:[\"$\",\"p\",null,{\"children\":[\"Large parts of dj-stripe, including this middleware, were designed before Stripe's major\\nrevamps of the old Plan model into Prices, Products, and multi-plan subscriptions. The\\nfunctionality offered by the middleware is no longer adequate, and building on top of it\\nwould not be particularly robust. We may bring similar functionality back in the future,\\nbut the middleware as it is going away (as well as the undocumented\\n\",[\"$\",\"code\",null,{\"children\":\"djstripe.utils.subscriber_has_active_subscription\"}],\" utility function).\"]}]\n24:[\"$\",\"p\",null,{\"children\":[\"If you want to keep the functionality for your project, you may wish to \",[\"$\",\"a\",null,{\"href\":\"https://github.com/dj-stripe/dj-stripe/blob/2.4.0/djstripe/middleware.py\",\"children\":\"copy the latest\\nversion of the\\nmiddleware\"}],\".\"]}]\n25:[\"$\",\"h3\",null,{\"children\":[\"Deprecating \",[\"$\",\"code\",null,{\"children\":\"djstripe.mixins\"}]]}]\n26:[\"$\",\"p\",null,{\"children\":\"This "])</script><script>self.__next_f.push([1,"is being deprecated for similar reasons as the SubscriptionPaymentMiddleware.\\nHowever, the mixins module was undocumented and never officially supported.\"}]\n27:[\"$\",\"h3\",null,{\"children\":\"Other deprecations\"}]\n"])</script><script>self.__next_f.push([1,"28:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"account\"}],\" field on \",[\"$\",\"code\",null,{\"children\":\"Charge\"}],\" has been renamed to \",[\"$\",\"code\",null,{\"children\":\"on_behalf_of\"}],\", to be consistent\\nwith Stripe's upstream model. Note that this field is separate from\\n\",[\"$\",\"code\",null,{\"children\":\"djstripe_owner_account\"}],\", which is set by dj-stripe itself to match the account of\\nthe API key used.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Account.get_connected_account_from_token()\"}],\" is deprecated in favour of\\n\",[\"$\",\"code\",null,{\"children\":\"Account.get_or_retrieve_for_api_key()\"}],\", which supports more than just Connect\\naccounts.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Customer.has_active_subscription()\"}],\" is deprecated in favour of\\n\",[\"$\",\"code\",null,{\"children\":\"Customer.is_subscribed_to()\"}],\". Note that the former takes a plan as argument,\\nwhereas the latter takes a product as argument.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"The \",[\"$\",\"code\",null,{\"children\":\"tax_percent\"}],\" attribute of \",[\"$\",\"code\",null,{\"children\":\"Invoice\"}],\" is no longer populated and will be removed\\nin 2.5.0. You may want to use \",[\"$\",\"code\",null,{\"children\":\"Invoice.default_tax_rates\"}],\" instead, which uses the\\nnew TaxId functionality.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Customer.business_vat_id\"}],\" is being deprecated in favour of using TaxId models\\ndirectly.\"]}],\"\\n\"]}]\n"])</script><script>self.__next_f.push([1,"29:[\"$\",\"h2\",null,{\"children\":\"Breaking changes\"}]\n2a:[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"Rename PlanBillingScheme to BillingScheme.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Remove \",[\"$\",\"code\",null,{\"children\":\"Plan.update_name()\"}],\" and these previously-deprecated fields:\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Customer.business_vat_id\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Subscription.start\"}]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Subscription.billing\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}]\n2b:[\"$\",\"h2\",null,{\"children\":\"Upgrade Guide\"}]\n2c:[\"$\",\"p\",null,{\"children\":\"Before you upgrade to dj-stripe 2.4.0, we recommend upgrading to dj-stripe 2.3.0.\\nUpgrading one major release at a time minimizes the risk of issues arising.\"}]\n2d:[\"$\",\"p\",null,{\"children\":\"Upgrading directly to 2.4.0 from dj-stripe versions older than 2.2.0 is unsupported.\"}]\n2e:[\"$\",\"p\",null,{\"children\":[\"To upgrade dj-stripe, run \",[\"$\",\"code\",null,{\"children\":\"pip install --upgrade dj-stripe==2.4.0\"}],\".\"]}]\n2f:[\"$\",\"p\",null,{\"children\":[\"Once installed, you can run \",[\"$\",\"code\",null,{\"children\":\"manage.py migrate djstripe\"}],\" to migrate the database models.\"]}]\n30:[\"$\",\"p\",null,{\"children\":[[\"$\",\"em\",null,{\"children\":\"NOTE\"}],\": If you are doing multiple major dj-stripe upgrades in a row, remember to run the\\nmigrate command after every upgrade. Skipping this step WILL cause errors.\"]}]\n31:[\"$\",\"p\",null,{\"children\":[[\"$\",\"em\",null,{\"children\":\"NOTE\"}],\": Migrating the database models may take a long time on databases with large amounts of customers.\"]}]\n32:[\"$\",\"h3\",null,{\"children\":\"Settings changes\"}]\n33:[\"$\",\"p\",null,{\"children\":[\"A new mandatory setting \",[\"$\",\"code\",null,{\"children\":\"DJSTRIPE_FOREIGN_KEY_TO_FIELD\"}],\" has been added. If you are\\nupgrading from an older version, you need to set it to \",[\"$\",\"code\",null,{\"children\":\"\\\"djstri"])</script><script>self.__next_f.push([1,"pe_id\\\"\"}],\".\"]}]\n34:[\"$\",\"p\",null,{\"children\":[\"Setting it to \",[\"$\",\"code\",null,{\"children\":\"\\\"id\\\"\"}],\" will make dj-stripe use the Stripe IDs as foreign keys. Although\\nthis is recommended for new installations, there is currently no migration available for\\ngoing from \",[\"$\",\"code\",null,{\"children\":\"\\\"djstripe_id\\\"\"}],\" to \",[\"$\",\"code\",null,{\"children\":\"\\\"id\\\"\"}],\".\"]}]\n35:[\"$\",\"p\",null,{\"children\":[\"For more information on this setting, see\\n\",[\"$\",\"a\",null,{\"href\":\"../reference/settings.md#djstripe_foreign_key_to_field\",\"children\":\"Settings\"}],\".\"]}]\n"])</script></body></html>